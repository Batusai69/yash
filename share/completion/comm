# completion settings for the comm command (POSIX 2008; GNU coreutils 8.4)
# written by magicant
# vim: set ft=sh ts=8 sts=8 sw=8 noet:

case "$("$1" --version 2>/dev/null)" in
	*'coreutils'*)
		typeset gnu=true
		complete -C "$1" -X
		;;
	*)
		typeset gnu=
		;;
esac

complete -C "$1" -f

complete -C "$1" -O 1 \
	-D "don't print column of lines unique to file 1"
complete -C "$1" -O 2 \
	-D "don't print column of lines unique to file 2"
complete -C "$1" -O 3 \
	-D "don't print column of lines common to both files"
if [ "$gnu" ]; then
	complete -C "$1" -O --check-order \
		-D "check if files are correctly sorted"
	complete -C "$1" -O --nocheck-order \
		-D "don't check if files are correctly sorted"
	complete -C "$1" -O --output-delimiter -F comp/ \
		-D "specify a delimiter to separate columns"
	complete -C "$1" -O --help
	complete -C "$1" -O --version
fi
