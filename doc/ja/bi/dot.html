<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="author" content="magicant">
<meta name="description" content="Yash のドット組込みコマンドについて">
<title>Yash マニュアル: ドット組込みコマンド</title>
<link rel="Contents" href="../index.html" title="目次">
<link rel="Next" href="colon.html" title="コロン組込みコマンド">
<link rel="Stylesheet" href="../style.css">

<div class="breadcrumb"><a href="../index.html">目次</a> >
<a rel="Up" href="index.html">組込みコマンド一覧</a></div>
<h1>ドット組込みコマンド</h1>

<p><dfn>ドット組込みコマンド</dfn>はテキストファイルを開いて、その内容をコマンドとして解釈し実行します。

<h2 id="syntax">構文</h2>
<ul>
<li><code>. <var>ファイル名</var> [<var>引数</var>…]</code>
</ul>

<h2 id="description">説明</h2>
<p>ドットコマンドは与えられた<var>ファイル名</var>のファイルを開き、その内容をコマンドとして解釈し<a href="../exec.html#environment">現在のコマンド実行環境</a>実行します。
<p><var>ファイル名</var>に続けて<var>引数</var>が与えられているときは、<a href="../exec.html#function">関数</a>の実行の時と同様に、コマンドの実行前に<var>引数</var>が<a href="../params.html#positional">位置パラメータ</a>に設定され、実行後に元の位置パラメータに戻ります。
<p><var>ファイル名</var>にスラッシュ (<code>/</code>) が一つも入っていない場合は、<a href="../exec.html#search">コマンドの検索</a>のときと同様に <a href="../params.html#sv-path"><code>PATH</code> 変数</a>の検索を行い、開くべきファイルを探します。ただしファイルは読み込み可能でさえあれば実行可能である必要はありません。検索の結果ファイルが見つかれば、そのファイルの内容を解釈・実行します。ファイルが見つからなかった場合、<a href="../posix.html">POSIX 準拠モード</a>では直ちにエラーになります。POSIX 準拠モードでないときは現在の作業ディレクトリのファイルを開くことを試みます。

<h2 id="options">オプション</h2>
<p>なし
<p>ドットコマンドでは、最初のオペランドより後にあるコマンドライン引数は全てオペランドとして解釈します。

<h2 id="operands">オペランド</h2>
<dl>
<dt><var>ファイル名</var>
<dd>読み込むファイルのパス名です。
<dt><var>引数</var>…
<dd>ファイルの内容を実行している間に位置パラメータに設定する文字列です。
</dl>

<h2 id="exitstatus">終了ステータス</h2>
<p>ドットコマンドの終了ステータスは、ファイルから読み込んで実行した最後のコマンドの終了ステータスです。ファイルの内容に一つもコマンドが入っていなかったときは終了ステータスは 0 です。ファイルが見つからなかったり開けなかったりしたときは終了ステータスは非 0 です。

<h2 id="notes">補足</h2>
<p>ドットコマンドは<a href="../builtin.html#types">特殊組込みコマンド</a>です。
<p>シェルが <a href="../posix.html">POSIX 準拠モード</a>で、かつ<a href="../interact.html">対話モード</a>でないとき、読み込むべきファイルが見つからなかったり開けなかったりするとシェルは直ちに終了します。
<p>POSIX には<var>引数</var>オペランドによって位置パラメータを変更できることについての規定はありません。よって POSIX 準拠モードでは<var>引数</var>オペランドを与えるとエラーになります。
