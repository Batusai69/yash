<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="author" content="magicant">
<meta name="description" content="Yash のパラメータ・変数について">
<title>Yash マニュアル: パラメータと変数</title>
<link rel="Contents" href="index.html" title="目次">
<link rel="Prev" href="syntax.html" title="コマンドの文法">

<div class="breadcrumb"><a rel="Up" href="index.html">目次</a> ></div>
<h1>パラメータと変数</h1>

<p>パラメータとは、<a class="TODO">パラメータ展開</a>で値に置き換えられるデータを言います。パラメータには位置パラメータ・特殊パラメータ・変数の三種類があります。

<h2 id="positional">位置パラメータ</h2>
<p><dfn>位置パラメータ</dfn>は 1 以上の自然数によって識別されるパラメータです。
例えば位置パラメータが三つある場合、それらは順に <code>1</code>, <code>2</code>, <code>3</code> という名称で識別されます。位置パラメータの個数は<a class="TODO">特殊パラメータ <code>#</code></a> で取得できます。
<p>位置パラメータは、シェルの起動時に、シェルのコマンドライン引数を元に初期化されます (<a href="invocation.html#args">起動時のコマンドライン引数</a>参照)。引数のうち、位置パラメータの値として与えられたオペランドが順に一つずつ位置パラメータとなります。
<p>シェルのコマンド実行中に<a class="TODO">関数</a>が呼び出されるとき、位置パラメータはその関数の呼び出しに対する引数に変更されます。すなわち、関数の実行中は位置パラメータによって関数の引数を参照できます。関数呼び出しの直前の位置パラメータの値は保存されており、関数の実行が終了する際に元の値に戻ります。
<p><code>0</code> は位置パラメータとは見なされません (特殊パラメータの一つです)。

<h2 id="special">特殊パラメータ</h2>
<p>特殊パラメータは一文字の記号によって識別されるパラメータです。特殊パラメータにはユーザが明示的に値を代入することはできません。
<p>Yash では以下の特殊パラメータが利用可能です。
<dl>
<dt><code>0</code>
<dd>このパラメータの値は、シェルの起動時に与えられたシェルの実行ファイルの名称またはスクリプトファイルの名称です。
<dt><code>#</code>
<dd>このパラメータの値は、現在の位置パラメータの個数を表す 0 以上の整数です。
<dt><code>$</code>
<dd>このパラメータの値は、シェル自身のプロセス ID を表す正の整数です。この値はサブシェルにおいても変わりません。
<dt><code>-</code>
<dd>このパラメータの値は、現在シェルで有功になっているオプションの文字をつなげたものです。この値には、<a href="invocation.html">シェルの起動</a>時にコマンドライン引数で指定できる一文字のオプションのうち現在有効になっているものが全て含まれます。<a class="TODO"><code>set</code> 組込みコマンド</a>でオプションを変更した場合は、その変更がこのパラメータの値にも反映されます。
<dt><code>?</code>
<dd>このパラメータの値は、最後に終了した<a href="syntax.html#pipelines">パイプライン</a>の終了ステータスを表す 0 以上の整数です。
<dt><code>!</code>
<dd>このパラメータの値は、最後に実行した<a href="syntax.html#async">非同期コマンド</a>のプロセス ID です。
<dt><code>*</code>
<dd>このパラメータの値は、現在の位置パラメータの値です。位置パラメータが一つもない場合、このパラメータの値は空文字列です。位置パラメータが複数ある場合、このパラメータの値は全ての位置パラメータの値を連結したものです。各位置パラメータの値の間は以下に従って区切られます。
 <ul>
 <li>変数 <code>IFS</code> が存在し、その値が空でない場合、各位置パラメータは変数 <code>IFS</code> の値の最初の文字で区切られます。
 <li>変数 <code>IFS</code> が存在し、その値が空の場合、各位置パラメータは間に何も置かずに連結されます。
 <li>変数 <code>IFS</code> が存在しない場合、各位置パラメータは空白で区切られます。
 </ul>
<dt><code>@</code>
<dd>このパラメータは、パラメータ <code>*</code> と同様に現在の全ての位置パラメータを表します。ただし、このパラメータが二重引用符による<a href="syntax.html#quotes">クォート</a>の中で<a class="TODO">展開</a>される場合の扱いがパラメータ <code>*</code> と異なります。この場合、各位置パラメータは文字で区切られるのではなく、(クォートの内部であるにもかかわらず) <a class="TODO">単語分割</a>されます。また位置パラメータが一つもない場合、このパラメータは展開後の単語には残りません。
</dl>

<h2 id="shellvars">シェルが使用する変数</h2>

<h2 id="arrays">配列</h2>
